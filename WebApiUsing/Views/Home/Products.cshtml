
@{
    ViewData["Title"] = "Ürünlerimiz";
}

<h1>Ürünlerimiz</h1>

<div id="products" class="row row-cols-3"></div>


@section Scripts {
    <script>
        fetch("https://dummyjson.com/products") // fetch metodunu bu şekilde istek atacağımız sunucuyu parametre vererek kullanıyoruz
            .then(response => response.json()) // bu satır apiden dönen sonucu json a dönüştürür
            .then(data => {
                // console.log(data) // api den dönen nesneyi tarayıcı konsoluna bastır
                console.log(data.products) // api den dönen ürün listesini tarayıcı konsoluna bastır
                let div = document.getElementById("products") // ekrandaki products id li elemeti seç
                data.products.forEach(p => { // gelen data içindeki products listesinde forEach ile dön
                    // listedeki her bir ürünü
                    div.innerHTML += `<div><a href="/Home/Detail/${p.id}" class="nav-link link-secondary">
                                        <img src="${p.thumbnail}" alt="" height="222" />
                                                        <h4>${p.title} ₺${p.price}</h4>
                            </a></div>` // yatay tırnak  klavyeden ctrl + alt + , e basarak açılıyor
                })
            })
            .catch(error => {
                // eğer api isteğinde hata oluşursa burada yakalayıp kullanabiliriz
                console.warn(error)
                alert(error + " Hatası Oluştu!")
                // veya burada db de logs tablosu yapıp kaydedebiliriz.
            })
    </script>
}